#!/usr/bin/env bash

set -euo pipefail

# Trap Ctrl+C (SIGINT) and clean up
trap_ctrlc() {
  kill 0
  exit 130
}
trap trap_ctrlc SIGINT SIGTERM

SCRIPT_NAME="Azure Resource Counter for Illumio"

# ------------------------
# Configuration
# ------------------------
VERBOSE=false
SCOPE=""
CONCURRENCY=20

# ------------------------
# Resource Mapping Configuration
# ------------------------
RESOURCE_MAPPING_URL="https://cloudsecure-onboarding-templates.s3.us-west-2.amazonaws.com/cloudsecure/resources.json"
RESOURCE_MAPPING_JSON=""
MAPPING_VERSION=""
MAPPING_DATE=""
USING_FALLBACK=false

# Embedded fallback
FALLBACK_RESOURCE_MAPPING_BASE64="ewogICJ1cGRhdGVkRGF0ZSI6ICIyMDI1LTA4LTEyVDE4OjMwOjAwWiIsCiAgInZlcnNpb24iOiAxLAogICJjbG91ZHMiOiB7CiAgICAiYXdzIjogWwogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29kZWRlcGxveTphcHBsaWNhdGlvbiIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImRlcGxveSBsaXN0LWFwcGxpY2F0aW9ucyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5hcHBsaWNhdGlvbnMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb2RlZGVwbG95OmRlcGxveW1lbnRncm91cCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImlzX2dsb2JhbCI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJhd3MgZGVwbG95IGxpc3QtYXBwbGljYXRpb25zIC0tcXVlcnkgJ2FwcGxpY2F0aW9ucycgLS1vdXRwdXQgdGV4dCB8IHRyICdcXHQnICdcXG4nIHwgd2hpbGUgcmVhZCBhcHA7IGRvIFsgLW4gXCIkYXBwXCIgXSAmJiBhd3MgZGVwbG95IGxpc3QtZGVwbG95bWVudC1ncm91cHMgLS1hcHBsaWNhdGlvbi1uYW1lIFwiJGFwcFwiIC0tcmVnaW9uICRBV1NfUkVHSU9OIC0tcXVlcnkgJ2xlbmd0aChkZXBsb3ltZW50R3JvdXBzKScgLS1vdXRwdXQgdGV4dCAyPi9kZXYvbnVsbCB8fCBlY2hvIDA7IGRvbmUgfCBhd2sgJ3tzKz0kMX0gRU5EIHtwcmludCBzfSciLAogICAgICAgICJjb3VudF9xdWVyeSI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImRpcmVjdGNvbm5lY3Q6Y29ubmVjdGlvbiIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJkaXJlY3Rjb25uZWN0IGRlc2NyaWJlLWNvbm5lY3Rpb25zIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLmNvbm5lY3Rpb25zIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZGlyZWN0Y29ubmVjdDpnYXRld2F5IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImRpcmVjdGNvbm5lY3QgZGVzY3JpYmUtZGlyZWN0LWNvbm5lY3QtZ2F0ZXdheXMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuZGlyZWN0Q29ubmVjdEdhdGV3YXlzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZGlyZWN0Y29ubmVjdDpsYWciLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZGlyZWN0Y29ubmVjdCBkZXNjcmliZS1sYWdzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLmxhZ3MgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJkaXJlY3Rjb25uZWN0OnZpcnR1YWxpbnRlcmZhY2UiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZGlyZWN0Y29ubmVjdCBkZXNjcmliZS12aXJ0dWFsLWludGVyZmFjZXMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIudmlydHVhbEludGVyZmFjZXMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJkb2NkYjpkYmNsdXN0ZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZG9jZGIgZGVzY3JpYmUtZGItY2x1c3RlcnMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuREJDbHVzdGVycyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImRvY2RiOmRiaW5zdGFuY2UiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZG9jZGIgZGVzY3JpYmUtZGItaW5zdGFuY2VzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLkRCSW5zdGFuY2VzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZG9jZGJlbGFzdGljOmNsdXN0ZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZG9jZGItZWxhc3RpYyBsaXN0LWNsdXN0ZXJzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLmNsdXN0ZXJzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZHluYW1vZGI6dGFibGUiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZHluYW1vZGIgbGlzdC10YWJsZXMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuVGFibGVOYW1lcyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjpjYXJyaWVyZ2F0ZXdheSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtY2Fycmllci1nYXRld2F5cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5DYXJyaWVyR2F0ZXdheXMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJlYzI6Y3VzdG9tZXJnYXRld2F5IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjMiBkZXNjcmliZS1jdXN0b21lci1nYXRld2F5cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5DdXN0b21lckdhdGV3YXlzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOmVncmVzc29ubHlpbnRlcm5ldGdhdGV3YXkiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLWVncmVzcy1vbmx5LWludGVybmV0LWdhdGV3YXlzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLkVncmVzc09ubHlJbnRlcm5ldEdhdGV3YXlzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOmVpcCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjMiBkZXNjcmliZS1hZGRyZXNzZXMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuQWRkcmVzc2VzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOmZsb3dsb2ciLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtZmxvdy1sb2dzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLkZsb3dMb2dzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOmluc3RhbmNlIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZFZpcnR1YWxNYWNoaW5lIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLWluc3RhbmNlcyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIlsuUmVzZXJ2YXRpb25zW10uSW5zdGFuY2VzW11dIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOmluc3RhbmNlY29ubmVjdGVuZHBvaW50IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjMiBkZXNjcmliZS1pbnN0YW5jZS1jb25uZWN0LWVuZHBvaW50cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5JbnN0YW5jZUNvbm5lY3RFbmRwb2ludHMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJlYzI6aW50ZXJuZXRnYXRld2F5IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjMiBkZXNjcmliZS1pbnRlcm5ldC1nYXRld2F5cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5JbnRlcm5ldEdhdGV3YXlzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOm5hdGdhdGV3YXkiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLW5hdC1nYXRld2F5cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5OYXRHYXRld2F5cyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjpuZXR3b3JrYWNsIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrU2VjdXJpdHkiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtbmV0d29yay1hY2xzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLk5ldHdvcmtBY2xzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOm5ldHdvcmtpbnRlcmZhY2UiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtbmV0d29yay1pbnRlcmZhY2VzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLk5ldHdvcmtJbnRlcmZhY2VzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOnJvdXRldGFibGVzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjMiBkZXNjcmliZS1yb3V0ZS10YWJsZXMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuUm91dGVUYWJsZXMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJlYzI6c2VjdXJpdHlncm91cCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1NlY3VyaXR5IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLXNlY3VyaXR5LWdyb3VwcyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5TZWN1cml0eUdyb3VwcyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjpzZWN1cml0eWdyb3VwcnVsZSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1NlY3VyaXR5IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLXNlY3VyaXR5LWdyb3VwLXJ1bGVzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLlNlY3VyaXR5R3JvdXBSdWxlcyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjpzbmFwc2hvdCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRWaXJ0dWFsTWFjaGluZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtc25hcHNob3RzIC0tb3duZXItaWRzIHNlbGYiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuU25hcHNob3RzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOnNwb3RmbGVldHJlcXVlc3QiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLXNwb3QtZmxlZXQtcmVxdWVzdHMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuU3BvdEZsZWV0UmVxdWVzdENvbmZpZ3MgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJlYzI6c3BvdGluc3RhbmNlcmVxdWVzdCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRWaXJ0dWFsTWFjaGluZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtc3BvdC1pbnN0YW5jZS1yZXF1ZXN0cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5TcG90SW5zdGFuY2VSZXF1ZXN0cyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjpzdWJuZXQiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtc3VibmV0cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5TdWJuZXRzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOnRyYW5zaXRnYXRld2F5IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjMiBkZXNjcmliZS10cmFuc2l0LWdhdGV3YXlzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLlRyYW5zaXRHYXRld2F5cyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjp0cmFuc2l0Z2F0ZXdheWF0dGFjaG1lbnQiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLXRyYW5zaXQtZ2F0ZXdheS1hdHRhY2htZW50cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5UcmFuc2l0R2F0ZXdheUF0dGFjaG1lbnRzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOnRyYW5zaXRnYXRld2F5bXVsdGljYXN0ZG9tYWluIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjMiBkZXNjcmliZS10cmFuc2l0LWdhdGV3YXktbXVsdGljYXN0LWRvbWFpbnMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuVHJhbnNpdEdhdGV3YXlNdWx0aWNhc3REb21haW5zIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOnRyYW5zaXRnYXRld2F5cm91dGV0YWJsZSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtdHJhbnNpdC1nYXRld2F5LXJvdXRlLXRhYmxlcyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5UcmFuc2l0R2F0ZXdheVJvdXRlVGFibGVzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOnZvbHVtZSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRTdG9yYWdlIiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLjEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtdm9sdW1lcyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5Wb2x1bWVzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWMyOnZwYyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiVmlydHVhbE5ldHdvcmsiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLXZwY3MiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuVnBjcyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjp2cGNlZW5kcG9pbnQiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIlByaXZhdGVFbmRwb2ludCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMDUsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtdnBjLWVuZHBvaW50cyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5WcGNFbmRwb2ludHMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJlYzI6dnBjZWVuZHBvaW50c2VydmljZSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtdnBjLWVuZHBvaW50LXNlcnZpY2VzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLlNlcnZpY2VOYW1lcyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjp2cGNwZWVyaW5nIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZWMyIGRlc2NyaWJlLXZwYy1wZWVyaW5nLWNvbm5lY3Rpb25zIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLlZwY1BlZXJpbmdDb25uZWN0aW9ucyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVjMjp2cG5jb25uZWN0aW9uIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjMiBkZXNjcmliZS12cG4tY29ubmVjdGlvbnMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuVnBuQ29ubmVjdGlvbnMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJlYzI6dnBuZ2F0ZXdheSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlYzIgZGVzY3JpYmUtdnBuLWdhdGV3YXlzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLlZwbkdhdGV3YXlzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWNzOmNsdXN0ZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkQ29udGFpbmVyIiwKICAgICAgICAicmF0aW9faXdsIjogMiwKICAgICAgICAicmF0aW9fc3dsIjogMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImVjcyBsaXN0LWNsdXN0ZXJzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLmNsdXN0ZXJBcm5zIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWNzOmNvbnRhaW5lcmluc3RhbmNlIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZENvbnRhaW5lciIsCiAgICAgICAgInJhdGlvX2l3bCI6IDIsCiAgICAgICAgInJhdGlvX3N3bCI6IDIsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJhd3MgZWNzIGxpc3QtY2x1c3RlcnMgLS1xdWVyeSAnY2x1c3RlckFybnMnIC0tb3V0cHV0IHRleHQgfCB0ciAnXFx0JyAnXFxuJyB8IHdoaWxlIHJlYWQgY2x1c3RlcjsgZG8gWyAtbiBcIiRjbHVzdGVyXCIgXSAmJiBhd3MgZWNzIGxpc3QtY29udGFpbmVyLWluc3RhbmNlcyAtLWNsdXN0ZXIgXCIkY2x1c3RlclwiIC0tcmVnaW9uIFwiJEFXU19SRUdJT05cIiAtLXF1ZXJ5ICdsZW5ndGgoY29udGFpbmVySW5zdGFuY2VBcm5zKScgLS1vdXRwdXQgdGV4dCB8fCBlY2hvIDA7IGRvbmUgfCBhd2sgJ3tzKz0kMX0gRU5EIHtwcmludCBzfSciLAogICAgICAgICJjb3VudF9xdWVyeSI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVrczphZGRvbiIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRDb250YWluZXIiLAogICAgICAgICJyYXRpb19pd2wiOiAyLAogICAgICAgICJyYXRpb19zd2wiOiAyLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiaXNfZ2xvYmFsIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImF3cyBla3MgbGlzdC1jbHVzdGVycyAtLXF1ZXJ5ICdjbHVzdGVyc1tdJyAtLW91dHB1dCB0ZXh0IHwgdHIgJ1xcdCcgJ1xcbicgfCB3aGlsZSByZWFkIGNsdXN0ZXI7IGRvIFsgLW4gXCIkY2x1c3RlclwiIF0gJiYgYXdzIGVrcyBsaXN0LWFkZG9ucyAtLWNsdXN0ZXItbmFtZSBcIiRjbHVzdGVyXCIgLS1yZWdpb24gJEFXU19SRUdJT04gLS1xdWVyeSAnbGVuZ3RoKGFkZG9ucyknIC0tb3V0cHV0IHRleHQgMj4vZGV2L251bGwgfHwgZWNobyAwOyBkb25lIHwgYXdrICd7cys9JDF9IEVORCB7cHJpbnQgc30nIiwKICAgICAgICAiY291bnRfcXVlcnkiOiBudWxsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJla3M6Y2x1c3RlciIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRDb250YWluZXIiLAogICAgICAgICJyYXRpb19pd2wiOiAyLAogICAgICAgICJyYXRpb19zd2wiOiAyLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJla3MgbGlzdC1jbHVzdGVycyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5jbHVzdGVycyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVrczpmYXJnYXRlcHJvZmlsZSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRDb250YWluZXIiLAogICAgICAgICJyYXRpb19pd2wiOiAyLAogICAgICAgICJyYXRpb19zd2wiOiAyLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiaXNfZ2xvYmFsIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImF3cyBla3MgbGlzdC1jbHVzdGVycyAtLXF1ZXJ5ICdjbHVzdGVyc1tdJyAtLW91dHB1dCB0ZXh0IHwgdHIgJ1xcdCcgJ1xcbicgfCB3aGlsZSByZWFkIGNsdXN0ZXI7IGRvIFsgLW4gXCIkY2x1c3RlclwiIF0gJiYgYXdzIGVrcyBsaXN0LWZhcmdhdGUtcHJvZmlsZXMgLS1jbHVzdGVyLW5hbWUgXCIkY2x1c3RlclwiIC0tcmVnaW9uICRBV1NfUkVHSU9OIC0tcXVlcnkgJ2xlbmd0aChmYXJnYXRlUHJvZmlsZU5hbWVzKScgLS1vdXRwdXQgdGV4dCAyPi9kZXYvbnVsbCB8fCBlY2hvIDA7IGRvbmUgfCBhd2sgJ3tzKz0kMX0gRU5EIHtwcmludCBzfSciLAogICAgICAgICJjb3VudF9xdWVyeSI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImVrczpub2RlZ3JvdXAiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkQ29udGFpbmVyIiwKICAgICAgICAicmF0aW9faXdsIjogMiwKICAgICAgICAicmF0aW9fc3dsIjogMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImlzX2dsb2JhbCI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJhd3MgZWtzIGxpc3QtY2x1c3RlcnMgLS1xdWVyeSAnY2x1c3RlcnNbXScgLS1vdXRwdXQgdGV4dCB8IHRyICdcXHQnICdcXG4nIHwgd2hpbGUgcmVhZCBjbHVzdGVyOyBkbyBbIC1uIFwiJGNsdXN0ZXJcIiBdICYmIGF3cyBla3MgbGlzdC1ub2RlZ3JvdXBzIC0tY2x1c3Rlci1uYW1lIFwiJGNsdXN0ZXJcIiAtLXJlZ2lvbiAkQVdTX1JFR0lPTiAtLXF1ZXJ5ICdsZW5ndGgobm9kZWdyb3VwcyknIC0tb3V0cHV0IHRleHQgMj4vZGV2L251bGwgfHwgZWNobyAwOyBkb25lIHwgYXdrICd7cys9JDF9IEVORCB7cHJpbnQgc30nIiwKICAgICAgICAiY291bnRfcXVlcnkiOiBudWxsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJlbGFzdGljYWNoZTpjYWNoZWNsdXN0ZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlbGFzdGljYWNoZSBkZXNjcmliZS1jYWNoZS1jbHVzdGVycyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5DYWNoZUNsdXN0ZXJzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWxhc3RpY2xvYWRiYWxhbmNpbmd2Mjpsb2FkYmFsYW5jZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlbGJ2MiBkZXNjcmliZS1sb2FkLWJhbGFuY2VycyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5Mb2FkQmFsYW5jZXJzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiZWxhc3RpY2xvYWRiYWxhbmNpbmd2Mjp0YXJnZXRncm91cCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJlbGJ2MiBkZXNjcmliZS10YXJnZXQtZ3JvdXBzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLlRhcmdldEdyb3VwcyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImdsYWNpZXI6dmF1bHQiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkU3RvcmFnZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMC4xLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiZ2xhY2llciBsaXN0LXZhdWx0cyAtLWFjY291bnQtaWQgLSIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5WYXVsdExpc3QgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJpYW06YWNjb3VudCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1NlY3VyaXR5IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiaXNfZ2xvYmFsIjogdHJ1ZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAic3RzIGdldC1jYWxsZXItaWRlbnRpdHkiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIxIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiaWFtOnVzZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtTZWN1cml0eSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImlzX2dsb2JhbCI6IHRydWUsCiAgICAgICAgImFwaV9jb21tYW5kIjogImlhbSBsaXN0LXVzZXJzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLlVzZXJzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAia21zOmtleSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1NlY3VyaXR5IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiaXNfZ2xvYmFsIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogImttcyBsaXN0LWtleXMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuS2V5cyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImxhbWJkYTpmdW5jdGlvbiIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiU2VydmVybGVzc0Z1bmN0aW9uIiwKICAgICAgICAicmF0aW9faXdsIjogMC4wMiwKICAgICAgICAicmF0aW9fc3dsIjogMC4wMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAibGFtYmRhIGxpc3QtZnVuY3Rpb25zIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLkZ1bmN0aW9ucyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIm1lbW9yeWRiOmNsdXN0ZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJtZW1vcnlkYiBkZXNjcmliZS1jbHVzdGVycyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5DbHVzdGVycyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIm5ldHdvcmttYW5hZ2VyOmNvbm5lY3RhdHRhY2htZW50IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogIm5ldHdvcmttYW5hZ2VyIGxpc3QtYXR0YWNobWVudHMgLS1hdHRhY2htZW50LXR5cGUgQ09OTkVDVCIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5BdHRhY2htZW50cyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIm5ldHdvcmttYW5hZ2VyOmNvcmVuZXR3b3JrIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogIm5ldHdvcmttYW5hZ2VyIGxpc3QtY29yZS1uZXR3b3JrcyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5Db3JlTmV0d29ya3MgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJuZXR3b3JrbWFuYWdlcjpnbG9iYWxuZXR3b3JrIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogIm5ldHdvcmttYW5hZ2VyIGRlc2NyaWJlLWdsb2JhbC1uZXR3b3JrcyIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5HbG9iYWxOZXR3b3JrcyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIm5ldHdvcmttYW5hZ2VyOnNpdGV0b3NpdGV2cG5hdHRhY2htZW50IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogIm5ldHdvcmttYW5hZ2VyIGxpc3QtYXR0YWNobWVudHMgLS1hdHRhY2htZW50LXR5cGUgU0lURV9UT19TSVRFX1ZQTiIsCiAgICAgICAgImNvdW50X3F1ZXJ5IjogIi5BdHRhY2htZW50cyB8IGxlbmd0aCIKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIm5ldHdvcmttYW5hZ2VyOnRyYW5zaXRnYXRld2F5cGVlcmluZyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJuZXR3b3JrbWFuYWdlciBsaXN0LXBlZXJpbmdzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLlBlZXJpbmdzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAibmV0d29ya21hbmFnZXI6dHJhbnNpdGdhdGV3YXlyZWdpc3RyYXRpb24iLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiaXNfZ2xvYmFsIjogdHJ1ZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiYXdzIG5ldHdvcmttYW5hZ2VyIGRlc2NyaWJlLWdsb2JhbC1uZXR3b3JrcyAtLXJlZ2lvbiB1cy13ZXN0LTIgLS1xdWVyeSAnR2xvYmFsTmV0d29ya3NbXS5HbG9iYWxOZXR3b3JrSWQnIC0tb3V0cHV0IHRleHQgfCB0ciAnXFx0JyAnXFxuJyB8IHdoaWxlIHJlYWQgbmV0d29yazsgZG8gWyAtbiBcIiRuZXR3b3JrXCIgXSAmJiBhd3MgbmV0d29ya21hbmFnZXIgZ2V0LXRyYW5zaXQtZ2F0ZXdheS1yZWdpc3RyYXRpb25zIC0tZ2xvYmFsLW5ldHdvcmstaWQgXCIkbmV0d29ya1wiIC0tcmVnaW9uIHVzLXdlc3QtMiAtLXF1ZXJ5ICdsZW5ndGgoVHJhbnNpdEdhdGV3YXlSZWdpc3RyYXRpb25zKScgLS1vdXRwdXQgdGV4dCB8fCBlY2hvIDA7IGRvbmUgfCBhd2sgJ3tzKz0kMX0gRU5EIHtwcmludCBzfSciLAogICAgICAgICJjb3VudF9xdWVyeSI6IG51bGwKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIm5ldHdvcmttYW5hZ2VyOnRyYW5zaXRnYXRld2F5cm91dGV0YWJsZWF0dGFjaG1lbnQiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAibmV0d29ya21hbmFnZXIgbGlzdC1hdHRhY2htZW50cyAtLWF0dGFjaG1lbnQtdHlwZSBUUkFOU0lUX0dBVEVXQVlfUk9VVEVfVEFCTEUiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuQXR0YWNobWVudHMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJuZXR3b3JrbWFuYWdlcjp2cGNhdHRhY2htZW50IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UsCiAgICAgICAgImFwaV9jb21tYW5kIjogIm5ldHdvcmttYW5hZ2VyIGxpc3QtYXR0YWNobWVudHMgLS1hdHRhY2htZW50LXR5cGUgVlBDIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLkF0dGFjaG1lbnRzIHwgbGVuZ3RoIgogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAicmFtOnJlc291cmNlc2hhcmUiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJyYW0gZ2V0LXJlc291cmNlLXNoYXJlcyAtLXJlc291cmNlLW93bmVyIFNFTEYiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIucmVzb3VyY2VTaGFyZXMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJyZHM6ZGJjbHVzdGVyIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZERhdGFiYXNlIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAicmRzIGRlc2NyaWJlLWRiLWNsdXN0ZXJzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLkRCQ2x1c3RlcnMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJyZHM6ZGJpbnN0YW5jZSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWREYXRhYmFzZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IHRydWUsCiAgICAgICAgImFwaV9jb21tYW5kIjogInJkcyBkZXNjcmliZS1kYi1pbnN0YW5jZXMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuREJJbnN0YW5jZXMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJyZHM6ZGJzZWN1cml0eWdyb3VwIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrU2VjdXJpdHkiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlLAogICAgICAgICJhcGlfY29tbWFuZCI6ICJyZHMgZGVzY3JpYmUtZGItc2VjdXJpdHktZ3JvdXBzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLkRCU2VjdXJpdHlHcm91cHMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJyZWRzaGlmdDpjbHVzdGVyIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZERhdGFiYXNlIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAicmVkc2hpZnQgZGVzY3JpYmUtY2x1c3RlcnMiLAogICAgICAgICJjb3VudF9xdWVyeSI6ICIuQ2x1c3RlcnMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJzMzpidWNrZXQiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkU3RvcmFnZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMC4xLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiaXNfZ2xvYmFsIjogdHJ1ZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiczNhcGkgbGlzdC1idWNrZXRzIiwKICAgICAgICAiY291bnRfcXVlcnkiOiAiLkJ1Y2tldHMgfCBsZW5ndGgiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJzMzpidWNrZXRwb2xpY3kiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkU3RvcmFnZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMC4xLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZSwKICAgICAgICAiaXNfZ2xvYmFsIjogdHJ1ZSwKICAgICAgICAiYXBpX2NvbW1hbmQiOiAiYXdzIHMzYXBpIGxpc3QtYnVja2V0cyAtLXF1ZXJ5ICdCdWNrZXRzW10uTmFtZScgLS1vdXRwdXQgdGV4dCB8IHRyICdcXHQnICdcXG4nIHwgd2hpbGUgcmVhZCBidWNrZXQ7IGRvIFsgLW4gXCIkYnVja2V0XCIgXSAmJiBhd3MgczNhcGkgZ2V0LWJ1Y2tldC1wb2xpY3kgLS1idWNrZXQgXCIkYnVja2V0XCIgPi9kZXYvbnVsbCAyPiYxICYmIGVjaG8gMSB8fCBlY2hvIDA7IGRvbmUgfCBhd2sgJ3tzKz0kMX0gRU5EIHtwcmludCBzfSciLAogICAgICAgICJjb3VudF9xdWVyeSI6IG51bGwKICAgICAgfQogICAgXSwKICAgICJnY3AiOiBbCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb21wdXRlLmdvb2dsZWFwaXMuY29tL0F1dG9zY2FsZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9EaXNrIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZFN0b3JhZ2UiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAuMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vRmlyZXdhbGwiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRmlyZXdhbGwiLAogICAgICAgICJyYXRpb19pd2wiOiAxMDAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vRmlyZXdhbGxQb2xpY3kiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRmlyZXdhbGwiLAogICAgICAgICJyYXRpb19pd2wiOiAxMDAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vSW5zdGFuY2UiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb21wdXRlLmdvb2dsZWFwaXMuY29tL0luc3RhbmNlR3JvdXAiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9JbnN0YW5jZUdyb3VwTWFuYWdlciIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRWaXJ0dWFsTWFjaGluZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb21wdXRlLmdvb2dsZWFwaXMuY29tL0luc3RhbmNlVGVtcGxhdGUiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9JbnRlcmNvbm5lY3QiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9JbnRlcmNvbm5lY3RBdHRhY2htZW50IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vTmV0d29yayIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiVmlydHVhbE5ldHdvcmsiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9Sb3V0ZXIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9TdWJuZXR3b3JrIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiYmF0Y2guZ29vZ2xlYXBpcy5jb20vSm9iIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAic3RvcmFnZS5nb29nbGVhcGlzLmNvbS9CdWNrZXQiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkU3RvcmFnZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMC4xLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9Ob2RlR3JvdXAiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9Ob2RlVGVtcGxhdGUiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9WcG5HYXRld2F5IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vVnBuVHVubmVsIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vRXh0ZXJuYWxWcG5HYXRld2F5IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vVGFyZ2V0VnBuR2F0ZXdheSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb250YWluZXIuZ29vZ2xlYXBpcy5jb20vTm9kZVBvb2wiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkQ29udGFpbmVyIiwKICAgICAgICAicmF0aW9faXdsIjogMiwKICAgICAgICAicmF0aW9fc3dsIjogMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbnRhaW5lci5nb29nbGVhcGlzLmNvbS9DbHVzdGVyIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZENvbnRhaW5lciIsCiAgICAgICAgInJhdGlvX2l3bCI6IDIsCiAgICAgICAgInJhdGlvX3N3bCI6IDIsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJsb2dnaW5nLmdvb2dsZWFwaXMuY29tL0xvZ1ZpZXciLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJsb2dnaW5nLmdvb2dsZWFwaXMuY29tL0xvZ0J1Y2tldCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImxvZ2dpbmcuZ29vZ2xlYXBpcy5jb20vTG9nU2luayIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogInB1YnN1Yi5nb29nbGVhcGlzLmNvbS9TY2hlbWEiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJwdWJzdWIuZ29vZ2xlYXBpcy5jb20vU3Vic2NyaXB0aW9uIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAicHVic3ViLmdvb2dsZWFwaXMuY29tL1RvcGljIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9BZGRyZXNzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vQmFja2VuZEJ1Y2tldCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb21wdXRlLmdvb2dsZWFwaXMuY29tL0JhY2tlbmRTZXJ2aWNlIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vRm9yd2FyZGluZ1J1bGUiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9IZWFsdGhDaGVjayIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb21wdXRlLmdvb2dsZWFwaXMuY29tL1RhcmdldEh0dHBQcm94eSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb21wdXRlLmdvb2dsZWFwaXMuY29tL1RhcmdldEh0dHBzUHJveHkiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9UYXJnZXRJbnN0YW5jZSIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vVGFyZ2V0UG9vbCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJjb21wdXRlLmdvb2dsZWFwaXMuY29tL1RhcmdldFNzbFByb3h5IiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vVGFyZ2V0VGNwUHJveHkiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9VcmxNYXAiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAic3FsYWRtaW4uZ29vZ2xlYXBpcy5jb20vSW5zdGFuY2UiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiY29tcHV0ZS5nb29nbGVhcGlzLmNvbS9OZXR3b3JrQXR0YWNobWVudCIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogImNvbXB1dGUuZ29vZ2xlYXBpcy5jb20vUm91dGUiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9CiAgICBdLAogICAgImF6dXJlIjogWwogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkFwcENvbmZpZ3VyYXRpb24vY29uZmlndXJhdGlvblN0b3JlcyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5BcHBDb25maWd1cmF0aW9uL2NvbmZpZ3VyYXRpb25TdG9yZXMvcmVwbGljYXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQmF0Y2gvYmF0Y2hBY2NvdW50cyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5CYXRjaC9iYXRjaEFjY291bnRzL2FwcGxpY2F0aW9ucyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5CYXRjaC9iYXRjaEFjY291bnRzL2FwcGxpY2F0aW9ucy92ZXJzaW9ucyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5CYXRjaC9iYXRjaEFjY291bnRzL2NlcnRpZmljYXRlcyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5CYXRjaC9iYXRjaEFjY291bnRzL3Bvb2xzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkJhdGNoL2JhdGNoQWNjb3VudHMvcHJpdmF0ZUVuZHBvaW50Q29ubmVjdGlvbnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQmF0Y2gvYmF0Y2hBY2NvdW50cy9wcml2YXRlTGlua1Jlc291cmNlcyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5DYWNoZS9SZWRpcyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWREYXRhYmFzZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQ29tcHV0ZS92aXJ0dWFsTWFjaGluZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQ29tcHV0ZS92aXJ0dWFsTWFjaGluZVNjYWxlU2V0cyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRWaXJ0dWFsTWFjaGluZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQ29tcHV0ZS92aXJ0dWFsTWFjaGluZVNjYWxlU2V0cy92aXJ0dWFsTWFjaGluZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkVmlydHVhbE1hY2hpbmUiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQ29udGFpbmVySW5zdGFuY2UvY29udGFpbmVyR3JvdXBzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZENvbnRhaW5lciIsCiAgICAgICAgInJhdGlvX2l3bCI6IDIsCiAgICAgICAgInJhdGlvX3N3bCI6IDIsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQ29udGFpbmVyU2VydmljZS9tYW5hZ2VkQ2x1c3RlcnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkQ29udGFpbmVyIiwKICAgICAgICAicmF0aW9faXdsIjogMiwKICAgICAgICAicmF0aW9fc3dsIjogMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkNvbnRhaW5lclNlcnZpY2UvbWFuYWdlZENsdXN0ZXJzL2FnZW50UG9vbHMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkQ29udGFpbmVyIiwKICAgICAgICAicmF0aW9faXdsIjogMiwKICAgICAgICAicmF0aW9fc3dsIjogMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5Db250YWluZXJTZXJ2aWNlL21hbmFnZWRDbHVzdGVycy9hZ2VudFBvb2xzL21hY2hpbmVzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZENvbnRhaW5lciIsCiAgICAgICAgInJhdGlvX2l3bCI6IDIsCiAgICAgICAgInJhdGlvX3N3bCI6IDIsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQ29udGFpbmVyU2VydmljZS9tYW5hZ2VkQ2x1c3RlcnMvcHJpdmF0ZUVuZHBvaW50Q29ubmVjdGlvbnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkQ29udGFpbmVyIiwKICAgICAgICAicmF0aW9faXdsIjogMiwKICAgICAgICAicmF0aW9fc3dsIjogMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5EQmZvclBvc3RncmVTUUwvZmxleGlibGVTZXJ2ZXJzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZERhdGFiYXNlIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkRCZm9yUG9zdGdyZVNRTC9mbGV4aWJsZVNlcnZlcnMvZGF0YWJhc2VzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZERhdGFiYXNlIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5EQmZvclBvc3RncmVTUUwvc2VydmVyR3JvdXBzdjIiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkRCZm9yUG9zdGdyZVNRTC9zZXJ2ZXJHcm91cHN2Mi9zZXJ2ZXJzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZERhdGFiYXNlIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5EQmZvclBvc3RncmVTUUwvc2VydmVycyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWREYXRhYmFzZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5EQmZvclBvc3RncmVTUUwvc2VydmVycy9kYXRhYmFzZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkRvY3VtZW50REIvY2Fzc2FuZHJhQ2x1c3RlcnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkRvY3VtZW50REIvZGF0YWJhc2VBY2NvdW50cyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWREYXRhYmFzZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5Eb2N1bWVudERCL2RhdGFiYXNlQWNjb3VudHMvY2Fzc2FuZHJhS2V5c3BhY2VzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZERhdGFiYXNlIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5Eb2N1bWVudERCL2RhdGFiYXNlQWNjb3VudHMvZ3JlbWxpbkRhdGFiYXNlcyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWREYXRhYmFzZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuRG9jdW1lbnREQi9kYXRhYmFzZUFjY291bnRzL21vbmdvZGJEYXRhYmFzZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkRvY3VtZW50REIvZGF0YWJhc2VBY2NvdW50cy9zcWxEYXRhYmFzZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkRvY3VtZW50REIvZGF0YWJhc2VBY2NvdW50cy90YWJsZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkRGF0YWJhc2UiLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkRvY3VtZW50REIvbW9uZ29DbHVzdGVycyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWREYXRhYmFzZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5JbnNpZ2h0cy9kaWFnbm9zdGljU2V0dGluZ3MiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuS2V5VmF1bHQvdmF1bHRzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrU2VjdXJpdHkiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay9hcHBsaWNhdGlvbkdhdGV3YXlzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL2FwcGxpY2F0aW9uU2VjdXJpdHlHcm91cHMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtTZWN1cml0eSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL2F6dXJlRmlyZXdhbGxzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZEZpcmV3YWxsIiwKICAgICAgICAicmF0aW9faXdsIjogMTAwLAogICAgICAgICJyYXRpb19zd2wiOiAxMDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL2Nvbm5lY3Rpb25zIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrUm91dGluZyIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEwLAogICAgICAgICJyYXRpb19zd2wiOiAxMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL2ZpcmV3YWxsUG9saWNpZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtTZWN1cml0eSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL2ZpcmV3YWxsUG9saWNpZXMvZmlyZXdhbGxQb2xpY3kvcnVsZUNvbGxlY3Rpb25Hcm91cHMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtTZWN1cml0eSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL2xvYWRCYWxhbmNlcnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay9sb2NhbE5ldHdvcmtHYXRld2F5cyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay9uYXRHYXRld2F5cyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrSW50ZXJmYWNlcyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL25ldHdvcmtJbnRlcmZhY2VzL2lwQ29uZmlndXJhdGlvbnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay9uZXR3b3JrU2VjdXJpdHlHcm91cHMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtTZWN1cml0eSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL25ldHdvcmtXYXRjaGVycyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL25ldHdvcmtXYXRjaGVycy9mbG93TG9ncyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL3ByaXZhdGVFbmRwb2ludHMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIlByaXZhdGVFbmRwb2ludCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMDUsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay9wcml2YXRlTGlua1NlcnZpY2VzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0Lk5ldHdvcmsvcHVibGljSVBBZGRyZXNzZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay9wdWJsaWNJUFByZWZpeGVzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0Lk5ldHdvcmsvcm91dGVUYWJsZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtSb3V0aW5nIiwKICAgICAgICAicmF0aW9faXdsIjogMTAsCiAgICAgICAgInJhdGlvX3N3bCI6IDEwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0Lk5ldHdvcmsvdmlydHVhbEh1YnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay92aXJ0dWFsSHVicy9iZ3BDb25uZWN0aW9ucyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya0luZnJhc3RydWN0dXJlTWFuYWdlbWVudCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL3ZpcnR1YWxIdWJzL2h1YlZpcnR1YWxOZXR3b3JrQ29ubmVjdGlvbnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay92aXJ0dWFsSHVicy9pcENvbmZpZ3VyYXRpb25zIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0Lk5ldHdvcmsvdmlydHVhbE5ldHdvcmtHYXRld2F5cyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay92aXJ0dWFsTmV0d29ya3MiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIlZpcnR1YWxOZXR3b3JrIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMCwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5OZXR3b3JrL3ZpcnR1YWxOZXR3b3Jrcy9zdWJuZXRzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0Lk5ldHdvcmsvdmlydHVhbE5ldHdvcmtzL3ZpcnR1YWxOZXR3b3JrUGVlcmluZ3MiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuTmV0d29yay92cG5HYXRld2F5cyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiTmV0d29ya1JvdXRpbmciLAogICAgICAgICJyYXRpb19pd2wiOiAxMCwKICAgICAgICAicmF0aW9fc3dsIjogMTAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuUmVzb3VyY2VzL3Jlc291cmNlR3JvdXBzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LlNxbC9tYW5hZ2VkSW5zdGFuY2VzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZERhdGFiYXNlIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LlNxbC9zZXJ2ZXJzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJDbG91ZERhdGFiYXNlIiwKICAgICAgICAicmF0aW9faXdsIjogMSwKICAgICAgICAicmF0aW9fc3dsIjogMSwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LlNxbC9zZXJ2ZXJzL2RhdGFiYXNlcyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWREYXRhYmFzZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDEsCiAgICAgICAgInJhdGlvX3N3bCI6IDEsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuU3RvcmFnZS9zdG9yYWdlQWNjb3VudHMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkU3RvcmFnZSIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMSwKICAgICAgICAicmF0aW9fc3dsIjogMC4xLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuV2ViL3NpdGVzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJTZXJ2ZXJsZXNzRnVuY3Rpb24iLAogICAgICAgICJyYXRpb19pd2wiOiAxLAogICAgICAgICJyYXRpb19zd2wiOiAxLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuQ29udGFpbmVyUmVnaXN0cnkvcmVnaXN0cmllcyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiQ2xvdWRDb250YWluZXIiLAogICAgICAgICJyYXRpb19pd2wiOiAyLAogICAgICAgICJyYXRpb19zd2wiOiAyLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LkNvbnRhaW5lclJlZ2lzdHJ5L3JlZ2lzdHJpZXMvcHJpdmF0ZUxpbmtSZXNvdXJjZXMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIkNsb3VkQ29udGFpbmVyIiwKICAgICAgICAicmF0aW9faXdsIjogMiwKICAgICAgICAicmF0aW9fc3dsIjogMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJyZXNvdXJjZV9uYW1lIjogIk1pY3Jvc29mdC5XZWIvc2l0ZXMvcHJpdmF0ZUVuZHBvaW50Q29ubmVjdGlvbnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIlByaXZhdGVFbmRwb2ludCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMDUsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuU3FsL21hbmFnZWRJbnN0YW5jZXMvcHJpdmF0ZUVuZHBvaW50Q29ubmVjdGlvbnMiLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIlByaXZhdGVFbmRwb2ludCIsCiAgICAgICAgInJhdGlvX2l3bCI6IDAuMDUsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuS2V5VmF1bHQvdmF1bHRzL3ByaXZhdGVFbmRwb2ludENvbm5lY3Rpb25zIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJQcml2YXRlRW5kcG9pbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjA1LAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0LlN1YnNjcmlwdGlvbi9zdWJzY3JpcHRpb24iLAogICAgICAgICJyZXNvdXJjZV90eXBlIjogIk5ldHdvcmtJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLAogICAgICAgICJyYXRpb19pd2wiOiAwLjEsCiAgICAgICAgInJhdGlvX3N3bCI6IDAsCiAgICAgICAgImVuYWJsZWRfaW5zaWdodHMiOiB0cnVlLAogICAgICAgICJlbmFibGVkX3NlZ21lbnRhdGlvbiI6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAicmVzb3VyY2VfbmFtZSI6ICJNaWNyb3NvZnQuV2ViL3NpdGVzL2Z1bmN0aW9ucyIsCiAgICAgICAgInJlc291cmNlX3R5cGUiOiAiU2VydmVybGVzc0Z1bmN0aW9uIiwKICAgICAgICAicmF0aW9faXdsIjogMC4wMiwKICAgICAgICAicmF0aW9fc3dsIjogMC4wMiwKICAgICAgICAiZW5hYmxlZF9pbnNpZ2h0cyI6IHRydWUsCiAgICAgICAgImVuYWJsZWRfc2VnbWVudGF0aW9uIjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgInJlc291cmNlX25hbWUiOiAiTWljcm9zb2Z0Lk5ldHdvcmsvbmV0d29ya1dhdGNoZXJzL0Zsb3dMb2dzIiwKICAgICAgICAicmVzb3VyY2VfdHlwZSI6ICJOZXR3b3JrSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50IiwKICAgICAgICAicmF0aW9faXdsIjogMC4xLAogICAgICAgICJyYXRpb19zd2wiOiAwLAogICAgICAgICJlbmFibGVkX2luc2lnaHRzIjogdHJ1ZSwKICAgICAgICAiZW5hYmxlZF9zZWdtZW50YXRpb24iOiBmYWxzZQogICAgICB9CiAgICBdCiAgfQp9Cg=="

# ------------------------
# Color codes for output
# ------------------------
RED='\033[31m'
GREEN='\033[32m'
YELLOW='\033[33m'
BLUE='\033[36m'
WHITE='\033[37m'
BOLD='\033[1m'
RESET='\033[0m'

# ------------------------
# Output Functions
# ------------------------
log() {
  if $VERBOSE; then
    echo -e "${WHITE}[LOG] $1${RESET}" >&2
  fi
}

log_api_call() {
  if $VERBOSE; then
    echo -e "${WHITE}[API CALL] $1${RESET}" >&2
  fi
}

log_failure() {
  if $VERBOSE; then
    echo -e "${RED}[API FAILURE] $1${RESET}" >&2
  fi
}

error_exit() {
  echo -e "${RED} Error: $1${RESET}" >&2
  echo -e "${YELLOW}  Tip: $2${RESET}" >&2 2>/dev/null || true
  exit 1
}

warn() {
  echo -e "${YELLOW} Warning: $1${RESET}" >&2
}

info() {
  echo -e "${BLUE} $1${RESET}" >&2
}

success() {
  echo -e "${GREEN} $1${RESET}" >&2
}

progress() {
  echo -e "${WHITE} $1${RESET}" >&2
}

# ------------------------
# Resource Mapping Functions
# ------------------------
decode_fallback_mapping() {
  if [[ -z "$FALLBACK_RESOURCE_MAPPING_BASE64" ]]; then
    error_exit "No embedded fallback resource mapping found" \
      "Please ensure the FALLBACK_RESOURCE_MAPPING_BASE64 variable is populated"
  fi
  echo "$FALLBACK_RESOURCE_MAPPING_BASE64" | base64 -d || {
    error_exit "Failed to decode embedded resource mappings" \
      "The embedded fallback may be corrupted"
  }
}

fetch_remote_mapping() {
  local temp_file=$(mktemp)
  local error_file=$(mktemp)
  local success=false
  
  # Try to fetch with curl (primary method)
  if command -v curl >/dev/null 2>&1; then
    log "Fetching resource mappings via curl..."
    if curl -sS --connect-timeout 5 --max-time 10 \
         "$RESOURCE_MAPPING_URL" \
         -o "$temp_file" 2>"$error_file"; then
      if [[ -s "$temp_file" ]] && jq -e '.clouds' "$temp_file" >/dev/null 2>&1; then
        cat "$temp_file"
        success=true
      else
        log "Downloaded file is invalid or empty"
      fi
    else
      log "Curl failed: $(cat "$error_file")"
    fi
  # Fallback to wget if curl not available
  elif command -v wget >/dev/null 2>&1; then
    log "Fetching resource mappings via wget..."
    if wget -q --timeout=10 -O "$temp_file" \
         "$RESOURCE_MAPPING_URL" 2>"$error_file"; then
      if [[ -s "$temp_file" ]] && jq -e '.clouds' "$temp_file" >/dev/null 2>&1; then
        cat "$temp_file"
        success=true
      else
        log "Downloaded file is invalid or empty"
      fi
    else
      log "Wget failed: $(cat "$error_file")"
    fi
  else
    log "Neither curl nor wget available for fetching remote mappings"
  fi
  
  rm -f "$temp_file" "$error_file"
  
  if $success; then
    return 0
  else
    return 1
  fi
}

load_resource_mapping() {
  local temp_mapping_file=$(mktemp)
  
  # Try to fetch remote mapping
  log "Attempting to fetch latest resource mappings from remote source..."
  if fetch_remote_mapping > "$temp_mapping_file" 2>/dev/null; then
    RESOURCE_MAPPING_JSON="$temp_mapping_file"
    USING_FALLBACK=false
    log "Successfully fetched latest resource mappings"
  else
    # Use fallback
    log "Remote mappings unavailable, using embedded fallback"
    decode_fallback_mapping > "$temp_mapping_file"
    RESOURCE_MAPPING_JSON="$temp_mapping_file"
    USING_FALLBACK=true
    
    if ! $VERBOSE; then
      warn "Using fallback resource mappings (remote source unavailable)"
    fi
  fi
  
  # Validate JSON structure
  if ! jq -e '.clouds.azure' "$RESOURCE_MAPPING_JSON" >/dev/null 2>&1; then
    error_exit "Invalid JSON structure in resource mappings" \
      "The resource mapping file is corrupted or has an unexpected format"
  fi
  
  # Extract version and date
  MAPPING_VERSION=$(jq -r '.version // "unknown"' "$RESOURCE_MAPPING_JSON" 2>/dev/null)
  MAPPING_DATE=$(jq -r '.updatedDate // "unknown"' "$RESOURCE_MAPPING_JSON" 2>/dev/null)
  
  # Display mapping info
  local mapping_source=$($USING_FALLBACK && echo "embedded" || echo "latest")
  info "Resource mappings loaded (${mapping_source} - v${MAPPING_VERSION}, updated: ${MAPPING_DATE})"
}

cleanup_mapping() {
  if [[ -n "$RESOURCE_MAPPING_JSON" && -f "$RESOURCE_MAPPING_JSON" ]]; then
    rm -f "$RESOURCE_MAPPING_JSON"
  fi
}

# ------------------------
# Cleanup on exit
# ------------------------
cleanup() {
  cleanup_mapping
}
trap cleanup EXIT ERR INT TERM

# ------------------------
# Prerequisites Check
# ------------------------
check_prerequisites() {
  local scope="$1"
  
  # Check required tools
  command -v az >/dev/null 2>&1 || \
    error_exit "Azure CLI is not installed" \
    "Install it from: https://docs.microsoft.com/en-us/cli/azure/install-azure-cli"
  
  command -v jq >/dev/null 2>&1 || \
    error_exit "jq is not installed" \
    "Install with: brew install jq (Mac) or apt-get install jq (Linux)"
  
  # Check authentication
  if ! az account show >/dev/null 2>&1; then
    error_exit "Not authenticated to Azure" \
    "Run: az login"
  fi
  
  # Resource mapping validation is now handled by load_resource_mapping
  
  success "Prerequisites verified"
  
  # Check specific scope access
  if [[ "$scope" =~ ^subscription:(.+)$ ]]; then
    local subscription_id="${BASH_REMATCH[1]}"
    info "Verifying access to subscription: $subscription_id"
    if ! az account show --subscription "$subscription_id" >/dev/null 2>&1; then
      error_exit "Unable to access subscription: $subscription_id" \
      "Check if the subscription exists and you have the required permissions"
    fi
    success "Subscription access verified"
  elif [[ "$scope" =~ ^tenant:(.+)$ ]]; then
    info "Verifying tenant access"
    if ! az account list --query "[].id" >/dev/null 2>&1; then
      error_exit "Unable to list subscriptions in tenant" \
      "Ensure you have Reader role at the tenant root level"
    fi
    success "Tenant access verified"
  fi
}

# ------------------------
# Initialize Resource Mappings
# ------------------------
initialize_mappings() {
  log "Initializing resource mappings..."
  
  # Build resource types arrays
  AZURE_RESOURCE_TYPES=($(jq -r '.clouds.azure[] | .script_resource_name' "$RESOURCE_MAPPING_JSON"))
  
  # Build workload ratios
  WORKLOAD_RATIOS_DATA=$(jq -r '.clouds.azure[] | .resource_type + ":" + (.ratio_iwl | tostring) + ":" + (.ratio_swl | tostring)' "$RESOURCE_MAPPING_JSON" | sort | uniq)
  
  # Build resource mapping
  RESOURCE_MAPPING=($(build_resource_mapping | cut -d' ' -f1))
  
  # Build Illumio categories
  INSIGHTS_RESOURCE_TYPES=()
  while IFS= read -r type; do
    INSIGHTS_RESOURCE_TYPES+=("$type")
  done < <(jq -r '.clouds.azure[] | select(.enabled_insights == true) | .resource_type' "$RESOURCE_MAPPING_JSON" | sort | uniq)

  SEGMENTATION_RESOURCE_TYPES=()
  while IFS= read -r type; do
    SEGMENTATION_RESOURCE_TYPES+=("$type")
  done < <(jq -r '.clouds.azure[] | select(.enabled_segmentation == true) | .resource_type' "$RESOURCE_MAPPING_JSON" | sort | uniq)
  
  # Initialize aggregate counts
  INSIGHTS_COUNTS_AGGREGATE=()
  SEGMENTATION_COUNTS_AGGREGATE=()
  for i in "${!INSIGHTS_RESOURCE_TYPES[@]}"; do
    INSIGHTS_COUNTS_AGGREGATE[$i]=0
  done
  for i in "${!SEGMENTATION_RESOURCE_TYPES[@]}"; do
    SEGMENTATION_COUNTS_AGGREGATE[$i]=0
  done
}

build_resource_mapping() {
  local mapping=""
  
  # Use parallel arrays instead of associative arrays
  local iwl_categories=()
  local iwl_indices=()
  local swl_categories=()
  local swl_indices=()
  
  # Build index arrays
  local iwl_cats=$(jq -r '.clouds.azure[] | select(.enabled_insights == true) | .resource_type' "$RESOURCE_MAPPING_JSON" | sort | uniq)
  local swl_cats=$(jq -r '.clouds.azure[] | select(.enabled_segmentation == true) | .resource_type' "$RESOURCE_MAPPING_JSON" | sort | uniq)
  
  local i=0
  while IFS= read -r cat; do
    if [[ -n "$cat" ]]; then
      iwl_categories+=("$cat")
      iwl_indices+=($i)
      ((i++))
    fi
  done <<< "$iwl_cats"
  
  i=0
  while IFS= read -r cat; do
    if [[ -n "$cat" ]]; then
      swl_categories+=("$cat")
      swl_indices+=($i)
      ((i++))
    fi
  done <<< "$swl_cats"
  
  # Build mapping array using parallel array lookup
  local resources=$(jq -r '.clouds.azure[] | .script_resource_name + "|" + .resource_type' "$RESOURCE_MAPPING_JSON")
  while IFS='|' read -r type cat; do
    local iwl_idx=-1
    local swl_idx=-1
    
    # Find index in iwl arrays
    for j in "${!iwl_categories[@]}"; do
      if [[ "${iwl_categories[$j]}" == "$cat" ]]; then
        iwl_idx=${iwl_indices[$j]}
        break
      fi
    done
    
    # Find index in swl arrays
    for j in "${!swl_categories[@]}"; do
      if [[ "${swl_categories[$j]}" == "$cat" ]]; then
        swl_idx=${swl_indices[$j]}
        break
      fi
    done
    
    mapping="$mapping$type|$iwl_idx|$swl_idx\n"
  done <<< "$resources"
  
  echo -e "$mapping"
}

# ------------------------
# Core Functions
# ------------------------
get_workload_ratio() {
  local resource_type="$1"
  local ratio_type="$2"
  local ratio_line=$(grep -E "^${resource_type}:" <<< "$WORKLOAD_RATIOS_DATA" || echo "Other:0.01:0.01")
  if [[ "$ratio_type" == "iw" ]]; then
    cut -d':' -f2 <<< "$ratio_line"
  else
    cut -d':' -f3 <<< "$ratio_line"
  fi
}

# Cross-platform file locking
lock_file() {
  local file="$1"
  local timeout="${2:-30}"
  local lock_file="${file}.lock"
  local count=0
  
  while [ $count -lt $timeout ]; do
    if mkdir "$lock_file" 2>/dev/null; then
      return 0
    fi
    sleep 0.1
    count=$((count + 1))
  done
  return 1
}

unlock_file() {
  local file="$1"
  rmdir "${file}.lock" 2>/dev/null || true
}

resolve_scope_to_subscriptions() {
  local scope="$1"
  local ids
  
  if [[ "$scope" =~ ^subscription:(.+)$ ]]; then
    echo "${BASH_REMATCH[1]}"
  elif [[ "$scope" =~ ^tenant:(.+)$ ]]; then
    log "Fetching subscriptions from tenant"
    local error_output=$(mktemp)
    local temp_output=$(mktemp)
    
    log_api_call "Executing: az account list --query [].id"
    az account list --query "[].id" --output tsv 2> "$error_output" > "$temp_output"
    
    if [[ -s "$error_output" ]]; then
      log_failure "Failed to list subscriptions: $(cat "$error_output")"
    fi
    
    ids=$(cat "$temp_output" | grep -E '^[a-f0-9-]{36}$')
    rm -f "$error_output" "$temp_output"
    
    [[ -n "$ids" ]] || error_exit "No subscriptions found in tenant" \
      "Ensure you have at least Reader role on subscriptions"
    
    echo "$ids" | tr '\n' ' '
  else
    error_exit "Invalid scope format: $scope" \
      "Use subscription:<ID> or tenant:<ID>"
  fi
}

count_resources_for_subscription() {
  local subscription="$1"
  local temp_file="$2"
  
  declare -a insights_counts
  declare -a segmentation_counts
  for i in "${!INSIGHTS_RESOURCE_TYPES[@]}"; do insights_counts[$i]=0; done
  for i in "${!SEGMENTATION_RESOURCE_TYPES[@]}"; do segmentation_counts[$i]=0; done
  
  log "Counting resources in subscription: $subscription"
  
  local tmp=$(mktemp)
  local error_output=$(mktemp)
  
  log_api_call "Executing: az resource list --subscription $subscription --query [].type"
  if ! az resource list \
      --subscription "$subscription" \
      --query "[].type" \
      --output tsv > "$tmp" 2> "$error_output"; then
    
    local error_msg=$(cat "$error_output")
    log_failure "Failed to list resources in subscription $subscription: $error_msg"
    if [[ "$error_msg" =~ "AuthorizationFailed" ]] || [[ "$error_msg" =~ "Forbidden" ]]; then
      warn "Skipping subscription $subscription: Insufficient permissions (need Reader role)"
    else
      warn "Failed to list resources in subscription $subscription"
    fi
    
    # Write zeros for this subscription
    if lock_file "$temp_file"; then
      echo -n "$subscription" >> "$temp_file"
      for i in "${!INSIGHTS_RESOURCE_TYPES[@]}"; do echo -n ":0" >> "$temp_file"; done
      for i in "${!SEGMENTATION_RESOURCE_TYPES[@]}"; do echo -n ":0" >> "$temp_file"; done
      echo >> "$temp_file"
      unlock_file "$temp_file"
    fi
    
    rm -f "$tmp" "$error_output"
    return
  fi
  
  rm -f "$error_output"
  
  # Process resources
  local line_count=$(wc -l < "$tmp")
  if [[ $line_count -gt 0 ]]; then
    while IFS= read -r resource_type; do
      resource_type=$(echo "$resource_type" | tr -d '[:space:]')
      
      if [[ -n "$resource_type" ]]; then
        for mapping in "${RESOURCE_MAPPING[@]}"; do
          IFS='|' read -r azure_type iw_index sw_index <<< "$mapping"
          if [[ "$resource_type" == "$azure_type" ]]; then
            [[ $iw_index -ge 0 ]] && insights_counts[$iw_index]=$((insights_counts[$iw_index]+1))
            [[ $sw_index -ge 0 ]] && segmentation_counts[$sw_index]=$((segmentation_counts[$sw_index]+1))
            break
          fi
        done
      fi
    done < "$tmp"
  fi
  
  rm -f "$tmp"
  
  # Write results
  if lock_file "$temp_file"; then
    echo -n "$subscription" >> "$temp_file"
    for i in "${!INSIGHTS_RESOURCE_TYPES[@]}"; do
      echo -n ":${insights_counts[$i]}" >> "$temp_file"
    done
    for i in "${!SEGMENTATION_RESOURCE_TYPES[@]}"; do
      echo -n ":${segmentation_counts[$i]}" >> "$temp_file"
    done
    echo >> "$temp_file"
    unlock_file "$temp_file"
  fi
  
  success "Finished counting resources for $subscription"
}

count_resources_concurrently() {
  local subscriptions_str="$1"
  IFS=' ' read -r -a subscriptions <<< "$subscriptions_str"
  
  local dir=$(mktemp -d)
  local out="$dir/counts.txt"
  local pids=()
  
  info "Scanning ${#subscriptions[@]} subscription(s)..."
  
  for s in "${subscriptions[@]}"; do
    if [[ -n "$s" && "$s" =~ ^[a-f0-9-]{36}$ ]]; then
      # Manage concurrency
      while [ "${#pids[@]}" -ge "$CONCURRENCY" ]; do
        new_pids=()
        for pid in "${pids[@]}"; do
          if kill -0 "$pid" 2>/dev/null; then
            new_pids+=("$pid")
          fi
        done
        pids=("${new_pids[@]}")
        sleep 0.1
      done
      
      count_resources_for_subscription "$s" "$out" &
      pids+=("$!")
    fi
  done
  
  # Wait for all jobs
  for pid in "${pids[@]}"; do 
    wait "$pid" 2>/dev/null || true
  done
  
  # Clean up locks
  rm -rf "$out".lock
  
  # Aggregate results
  if [[ -f "$out" ]]; then
    while IFS=':' read -r sub rest; do
      if [[ -n "$sub" && -n "$rest" ]]; then
        IFS=':' read -r -a vals <<< "$rest"
        local val_index=0
        
        for i in "${!INSIGHTS_RESOURCE_TYPES[@]}"; do
          if [[ $val_index -lt ${#vals[@]} && ${vals[$val_index]} =~ ^[0-9]+$ ]]; then
            INSIGHTS_COUNTS_AGGREGATE[$i]=$((INSIGHTS_COUNTS_AGGREGATE[$i] + vals[val_index]))
          fi
          val_index=$((val_index + 1))
        done
        
        for i in "${!SEGMENTATION_RESOURCE_TYPES[@]}"; do
          if [[ $val_index -lt ${#vals[@]} && ${vals[$val_index]} =~ ^[0-9]+$ ]]; then
            SEGMENTATION_COUNTS_AGGREGATE[$i]=$((SEGMENTATION_COUNTS_AGGREGATE[$i] + vals[val_index]))
          fi
          val_index=$((val_index + 1))
        done
      fi
    done < "$out"
  fi
  
  rm -rf "$dir"
}

calculate_workloads() {
  local total_iw=0 total_sw=0
  
  for i in "${!INSIGHTS_RESOURCE_TYPES[@]}"; do
    local ct=${INSIGHTS_COUNTS_AGGREGATE[$i]}
    local rt=${INSIGHTS_RESOURCE_TYPES[$i]}
    local iw=$(get_workload_ratio "$rt" iw)
    iw=$(echo "$iw" | tr -d '[:space:]')
    
    if [[ -n "$iw" && "$iw" =~ ^[0-9]+(\.[0-9]+)?$ ]]; then
      if [[ $(awk -v val="$iw" 'BEGIN {print (val > 0) ? 1 : 0}') -eq 1 ]]; then
        total_iw=$(awk -v total="$total_iw" -v ct="$ct" -v iw="$iw" 'BEGIN {print total + ct * iw}')
      fi
    fi
  done
  
  for i in "${!SEGMENTATION_RESOURCE_TYPES[@]}"; do
    local ct=${SEGMENTATION_COUNTS_AGGREGATE[$i]}
    local rt=${SEGMENTATION_RESOURCE_TYPES[$i]}
    local sw=$(get_workload_ratio "$rt" sw)
    sw=$(echo "$sw" | tr -d '[:space:]')
    
    if [[ -n "$sw" && "$sw" =~ ^[0-9]+(\.[0-9]+)?$ ]]; then
      if [[ $(awk -v val="$sw" 'BEGIN {print (val > 0) ? 1 : 0}') -eq 1 ]]; then
        total_sw=$(awk -v total="$total_sw" -v ct="$ct" -v sw="$sw" 'BEGIN {print total + ct * sw}')
      fi
    fi
  done
  
  # Round up
  total_iw=$(echo "$total_iw" | awk '{print int($1+0.999)}')
  total_sw=$(echo "$total_sw" | awk '{print int($1+0.999)}')
  echo "$total_iw:$total_sw"
}

print_summary() {
  local scope="$1"
  local label=""
  
  # Format label based on scope
  if [[ "$scope" =~ ^tenant:(.+)$ ]]; then
    label="Azure Tenant: ${BASH_REMATCH[1]}"
  elif [[ "$scope" =~ ^subscription:(.+)$ ]]; then
    label="Azure Subscription: ${BASH_REMATCH[1]}"
  fi
  
  echo
  echo ""
  echo -e "${BOLD}  Resource Summary for $label${RESET}"
  echo ""
  echo
  
  # Insights Workloads
  echo -e "${BOLD}${BLUE}  Illumio Insights Workloads (IWL)${RESET}"
  echo ""
  printf "${BOLD}%-40s %-10s %-10s${RESET}\n" "Resource Type" "Count" "IWL"
  echo ""
  
  local total_insights_resources=0
  for i in "${!INSIGHTS_RESOURCE_TYPES[@]}"; do
    local rt=${INSIGHTS_RESOURCE_TYPES[$i]}
    local count=${INSIGHTS_COUNTS_AGGREGATE[$i]}
    local ratio=$(get_workload_ratio "$rt" iw)
    local workload=0
    
    total_insights_resources=$((total_insights_resources + count))
    
    ratio=$(echo "$ratio" | tr -d '[:space:]')
    if [[ -n "$ratio" && "$ratio" =~ ^[0-9]+(\.[0-9]+)?$ ]]; then
      if [[ $(awk -v val="$ratio" 'BEGIN {print (val > 0) ? 1 : 0}') -eq 1 ]]; then
        workload=$(awk -v count="$count" -v ratio="$ratio" 'BEGIN {printf "%.2f", count * ratio}')
      fi
    fi
    
    if [[ $count -gt 0 ]]; then
      printf "%-40s %-10s %-10s\n" "$rt" "$count" "$workload"
    fi
  done
  
  local w=$(calculate_workloads)
  IFS=':' read -r total_iw total_sw <<< "$w"
  
  echo ""
  printf "${BOLD}%-40s %-10s ${GREEN}%-10s${RESET}\n" "TOTAL" "$total_insights_resources" "$total_iw IWLs"
  echo
  
  # Segmentation Workloads
  echo -e "${BOLD}${BLUE}  Illumio Segmentation Workloads (SWL)${RESET}"
  echo ""
  printf "${BOLD}%-40s %-10s %-10s${RESET}\n" "Resource Type" "Count" "SWL"
  echo ""
  
  local total_segmentation_resources=0
  for i in "${!SEGMENTATION_RESOURCE_TYPES[@]}"; do
    local rt=${SEGMENTATION_RESOURCE_TYPES[$i]}
    local count=${SEGMENTATION_COUNTS_AGGREGATE[$i]}
    local ratio=$(get_workload_ratio "$rt" sw)
    local workload=0
    
    total_segmentation_resources=$((total_segmentation_resources + count))
    
    ratio=$(echo "$ratio" | tr -d '[:space:]')
    if [[ -n "$ratio" && "$ratio" =~ ^[0-9]+(\.[0-9]+)?$ ]]; then
      if [[ $(awk -v val="$ratio" 'BEGIN {print (val > 0) ? 1 : 0}') -eq 1 ]]; then
        workload=$(awk -v count="$count" -v ratio="$ratio" 'BEGIN {printf "%.2f", count * ratio}')
      fi
    fi
    
    if [[ $count -gt 0 ]]; then
      printf "%-40s %-10s %-10s\n" "$rt" "$count" "$workload"
    fi
  done
  
  echo ""
  printf "${BOLD}%-40s %-10s ${GREEN}%-10s${RESET}\n" "TOTAL" "$total_segmentation_resources" "$total_sw SWLs"
}

print_help() {
  echo -e "${BOLD}$SCRIPT_NAME${RESET}

${BOLD}USAGE:${RESET}
  $0 --scope <scope> [options]

${BOLD}REQUIRED:${RESET}
  --scope <scope>    Specify the Azure scope to scan:
                      subscription:<SUBSCRIPTION_ID>  - Single subscription
                      tenant:<TENANT_ID>              - All subscriptions in tenant

${BOLD}OPTIONS:${RESET}
  --verbose          Enable detailed logging
  --help             Show this help message

${BOLD}EXAMPLES:${RESET}
  # Scan a single subscription
  $0 --scope subscription:12345678-1234-1234-1234-123456789012

  # Scan all subscriptions in tenant
  $0 --scope tenant:default

  # Scan with verbose output
  $0 --scope tenant:default --verbose

${BOLD}PREREQUISITES:${RESET}
   Azure CLI installed and authenticated (az login)
   jq utility installed
   Appropriate Azure RBAC permissions

${BOLD}REQUIRED PERMISSIONS:${RESET}
   Reader role on target subscriptions
   Microsoft.Resources/subscriptions/resources/read

${BOLD}NOTES:${RESET}
   The script will skip subscriptions where you lack permissions
   Resource counts are aggregated across all accessible subscriptions"
}

# ------------------------
# Main Function
# ------------------------
main() {
  local scope=""
  local help=false
  local verbose=false
  
  # Parse arguments
  while [[ $# -gt 0 ]]; do
    case $1 in
      --scope)
        scope="$2"
        shift 2
        ;;
      --verbose)
        verbose=true
        shift
        ;;
      --help)
        help=true
        shift
        ;;
      *)
        error_exit "Unknown option: $1" \
        "Run '$0 --help' for usage information"
        ;;
    esac
  done
  
  if $help; then
    print_help
    exit 0
  fi
  
  VERBOSE=$verbose
  
  if [[ -z "$scope" ]]; then
    error_exit "Scope is required" \
    "Use --scope subscription:<ID> or tenant:<ID>"
  fi
  
  # Validate scope format
  if ! [[ "$scope" =~ ^(subscription|tenant):(.+)$ ]]; then
    error_exit "Invalid scope format: $scope" \
    "Use format: subscription:<ID> or tenant:<ID>"
  fi
  
  info "Starting $SCRIPT_NAME"
  
  # Check prerequisites
  check_prerequisites "$scope"
  
  # Load resource mappings (NEW - added before initialize_mappings)
  load_resource_mapping
  
  # Initialize mappings
  initialize_mappings
  
  # Resolve scope to subscriptions
  progress "Resolving scope to subscriptions..."
  local subscriptions=$(resolve_scope_to_subscriptions "$scope")
  if [[ -z "$subscriptions" ]]; then
    error_exit "No accessible subscriptions found in scope: $scope" \
    "Verify you have Reader role on at least one subscription"
  fi
  
  # Convert to array for counting
  IFS=' ' read -r -a subscriptions_array <<< "$subscriptions"
  info "Found ${#subscriptions_array[@]} subscription(s) to scan"
  
  # Count resources
  progress "Scanning resources (this may take a few minutes)..."
  count_resources_concurrently "$subscriptions"
  
  # Print summary
  print_summary "$scope"
}

# Execute main function
main "$@"